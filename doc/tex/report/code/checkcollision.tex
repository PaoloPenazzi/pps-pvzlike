\begin{lstlisting}[language=Scala, label=code:checkcollision, caption= Metodo che controlla e crea le collisioni.]
/** Detects [[Collision]] ... */
  def checkCollision(entities: Seq[GameEntity[Entity]]): 
    Seq[BulletTroopCollision] =
        for
            b <- entities.of[Bullet]
        yield
            BulletTroopCollision(b, for
                e <- entities.of[Troop]
                if b.entity isCollidingWith e.entity
            yield e)
\end{lstlisting}





